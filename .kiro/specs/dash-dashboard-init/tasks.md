# Implementation Plan

## Task Overview

本ドキュメントは、Dashダッシュボード初期化機能の実装タスクを定義する。

---

## Tasks

- [x] 1. 依存関係とプロジェクト設定
- [x] 1.1 (P) Dash依存関係の追加
  - pyproject.tomlにdash 2.18.x系を追加する
  - 既存のPydantic依存関係を維持しつつ、Dashフレームワークを統合する
  - uvを使用して依存関係をインストールし、動作確認を行う
  - _Requirements: 5.1_

- [x] 2. アプリケーション設定モジュールの実装
- [x] 2.1 (P) AppConfig設定クラスの作成
  - アプリケーションタイトル、ホスト、ポート、デバッグモードを管理するPydanticモデルを実装する
  - デフォルト値として「BigQueryテーブル利用状況」、127.0.0.1、8050、debug=Trueを設定する
  - ポート番号の範囲（1024-65535）バリデーションを追加する
  - タイトルの空文字列禁止バリデーションを追加する
  - _Requirements: 1.2, 2.2, 4.1_

- [x] 3. レイアウト構築モジュールの実装
- [x] 3.1 (P) LayoutBuilderの作成
  - 「BigQueryテーブル利用状況」タイトルを定数として定義する
  - ダッシュボードの基本レイアウトを構築する関数を実装する
  - HTMLコンポーネント（Div、H1ヘッダー）を使用した階層構造を作成する
  - ページタイトルとヘッダーを含むルートコンポーネントを返す
  - _Requirements: 3.1, 3.2, 3.3_

- [x] 4. Dashアプリケーション初期化の実装
- [x] 4.1 アプリケーション生成機能の実装
  - 設定オブジェクトを受け取りDashインスタンスを生成する関数を実装する
  - アプリケーションタイトルを設定に基づいて適用する
  - レイアウトビルダーから取得したレイアウトをアプリケーションに設定する
  - 無効な設定が渡された場合のエラーハンドリングを実装する
  - _Requirements: 1.1, 1.2, 1.3_
  - _Note: 2.1と3.1の完了が必要_

- [x] 5. サーバー起動機能の実装
- [x] 5.1 ServerRunnerの実装
  - ローカルホスト（127.0.0.1）でサーバーを起動する機能を実装する
  - 設定されたポート番号（デフォルト8050）でHTTPリクエストを待ち受ける
  - サーバー起動時に起動URLをコンソールに出力する
  - デバッグモード有効時はホットリロードを有効化する
  - ポート競合時の明確なエラーメッセージを実装する
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 4.1, 4.2, 4.3_
  - _Note: タスク4.1の完了が必要_

- [x] 6. エントリーポイントの実装と統合
- [x] 6.1 メインスクリプトの作成
  - プロジェクトルートにapp.pyを作成する
  - `if __name__ == "__main__":`ブロックでエントリーポイントを提供する
  - 設定の初期化、アプリケーション生成、サーバー起動の一連の処理を統合する
  - pyproject.tomlで、project.scriptを適切な値に書き換える
  - `uv run main`コマンドでダッシュボードが起動することを確認する
  - _Requirements: 1.1, 2.1, 5.1_
  - _Note: タスク5.1の完了が必要_

- [x] 7. 動作検証
- [x] 7.1 起動とレイアウト表示の確認
  - アプリケーションを起動し、ブラウザでhttp://127.0.0.1:8050にアクセスして表示を確認する
  - タイトル「BigQueryテーブル利用状況」がページに表示されることを確認する
  - デバッグモードでソースコード変更時に自動リロードされることを確認する
  - エラー発生時にブラウザ上にエラー詳細が表示されることを確認する
  - _Requirements: 3.1, 3.2, 3.3, 4.2, 4.3_

---

## Requirements Coverage

| Requirement | Task |
|-------------|------|
| 1.1 | 4.1, 6.1 |
| 1.2 | 2.1, 4.1 |
| 1.3 | 4.1 |
| 2.1 | 5.1, 6.1 |
| 2.2 | 2.1, 5.1 |
| 2.3 | 5.1 |
| 2.4 | 5.1 |
| 3.1 | 3.1, 7.1 |
| 3.2 | 3.1, 7.1 |
| 3.3 | 3.1, 7.1 |
| 4.1 | 2.1, 5.1 |
| 4.2 | 5.1, 7.1 |
| 4.3 | 5.1, 7.1 |
| 5.1 | 1.1, 6.1 |
